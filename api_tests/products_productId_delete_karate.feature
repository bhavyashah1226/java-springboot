# ********RoostGPT********

# Test generated by RoostGPT for test products-karate using AI Type Azure Open AI and AI Model roost-gpt4-32k
# 
# Test generated for /products/{productId}_delete for http method type DELETE in karate framework
# RoostTestHash=befb82c928
# 
# 

# ********RoostGPT********
Feature: Product Deletion

  Background:
    * url target = $processEnvironment.API_HOST
    * def auth_token = $processEnvironment.AUTH_TOKEN

  Scenario: Delete Product

    # Load products ids from external CSV file to perform deletion
    * csv products = read('products_productId_delete_karate.csv')

    * def deleteProduct =
    """
    function(productId){
      var request = 
      {
        method: 'delete',
        headers: {'Authorization': '#(auth_token)'},
        path: '/products/' + productId
      };
      var response = karate.callSingle(request);
      if (response.status !== 200) {
          karate.fail('>>> Product deletion request failed', response);
      }
      return response;
    }
    """

    # For each product in the products list
    * def results = karate.map(products, function(each){deleteProduct(each.productId)})

    # Assert response for each product deletion
    * match each responseStatus in results == 200
    * match each responseHeaders in results contains { 'Content-Type': 'application/json' }
